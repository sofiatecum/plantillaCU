<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Descripción de Caso de Uso (Plantilla)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background-color: #b1e99c;
    }

    h1 {
      text-align: center;
      font-size: 24px;
      margin-bottom: 20px;
      color: #333333;
    }

    .form-section {
      border: 2px solid #ddd;
      background-color: #efe1c8;
      padding: 15px;
      margin-bottom: 15px;
      border-radius: 6px;
    }

    .form-section label {
      display: block;
      font-weight: bold;
      margin-bottom: 5px;
      color: #333;
    }

    input[type="text"],
    textarea,
    select {
      width: 100%;
      padding: 8px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 4px;
      box-sizing: border-box;
    }

    textarea {
      height: 80px;
      resize: vertical;
    }

    .inline-group {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }

    .inline-group .form-section {
      flex: 1;
      min-width: 250px;
    }

    .generar-btn {
      display: block;
      width: 150px;
      margin: 30px auto;
      padding: 10px;
      background-color: #934c52;
      color: white;
      text-align: center;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
    }

    .generar-btn:hover {
      background-color: #666;
    }

    @media (max-width: 768px) {
      .inline-group {
        flex-direction: column;
        gap: 0;
      }

      .generar-btn {
        width: 100%;
      }

      body {
        margin: 10px;
      }

      input, textarea, select {
        font-size: 16px;
      }
    }

    @media print {
      body {
        -webkit-print-color-adjust: exact;
        print-color-adjust: exact;
      }
      .generar-btn {
        display: none;
      }
    }
  </style>
</head>
<body>
  <div id="pdf-content">
    <h1>Descripción de Caso de Uso (Plantilla)</h1>
    <p style="color: #333333;">Algunas de las áreas que se incluyen son opcionales, y según el nivel u organización no es necesario su uso</p>

    <div class="inline-group">
      <div class="form-section">
        <label for="identificador">Identificador (Nombre del Caso de Uso):</label>
        <input type="text" id="identificador">
      </div>

      <div class="form-section">
        <label for="area">Área:</label>
        <input type="text" id="area">
      </div>
    </div>

    <div class="form-section">
      <label for="actores">Actor(es):</label>
      <input type="text" id="actores">
    </div>

    <div class="form-section">
      <label for="interesados">Interesados:</label>
      <input type="text" id="interesados">
    </div>

    <div class="form-section">
      <label for="nivel">Nivel:</label>
      <select id="nivel" name="nivel">
        <option value="Seleccionar">Seleccionar--</option>
        <option value="Nube">Nube (O blanco, más alto)</option>
        <option value="Cometa">Cometa (Nivel alto)</option>
        <option value="Mar">Mar (o azul)</option>
        <option value="Pez">Pez (o índigo)</option>
        <option value="Almeja">Almeja (o negro)</option>
      </select>
    </div>

    <div class="form-section">
      <label for="descripcion">Descripción:</label>
      <textarea id="descripcion"></textarea>
    </div>

    <div class="inline-group">
      <div class="form-section">
        <label for="evento">Evento desencadenador:</label>
        <textarea id="evento"></textarea>
      </div>

      <div class="form-section">
        <label for="informacion">Información para los Pasos:</label>
        <textarea id="informacion"></textarea>
      </div>
    </div>

    <div class="form-section">
      <label for="precondiciones">Precondiciones:</label>
      <textarea id="precondiciones"></textarea>
    </div>

    <div class="form-section">
      <label for="postcondiciones">Postcondiciones:</label>
      <textarea id="postcondiciones"></textarea>
    </div>

    <div class="form-section">
      <label for="escenario">Escenario de Caso Exitoso:</label>
      <textarea id="escenario"></textarea>
    </div>

    <div class="form-section">
      <label for="prioridad">Prioridad:</label>
      <input type="text" id="prioridad">
    </div>
  </div>

  <button class="generar-btn">Generar PDF</button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script>
    document.querySelector('.generar-btn').addEventListener('click', function () {
      const identificador = document.getElementById('identificador').value.trim();
      const actores = document.getElementById('actores').value.trim();
      const nivel = document.getElementById('nivel').value.trim();
      const descripcion = document.getElementById('descripcion').value.trim();

      let errores = [];
      if (identificador === '') errores.push('🆔 Identificador');
      if (actores === '') errores.push('🎭 Actor(es)');
      if (nivel === '' || nivel === 'Seleccionar') errores.push('📶 Nivel');
      if (descripcion === '') errores.push('📝 Descripción');

      if (errores.length > 0) {
        alert('Por favor completa los siguientes campos antes de generar el PDF:\n\n' + errores.join('\n'));
        return;
      }

      const opciones = {
        margin: [10, 10, 10, 10],
        filename: identificador + '.pdf',
        image: { type: 'jpeg', quality: 1 },
        html2canvas: { scale: 2, useCORS: true },
        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' },
        pagebreak: { mode: ['avoid-all', 'css', 'legacy'] }
      };

      const contenido = document.getElementById('pdf-content');
      html2pdf().set(opciones).from(contenido).save();
    });
  </script>
</body>
</html>
